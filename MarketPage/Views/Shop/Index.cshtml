@model List<ItemViewShop>
@{
    ViewData["Title"] = "Shop";
}

<div class="container">
    <div class="card-title ml-1">
        <h4 class="text-left ml-3 mt-4" style="color:#808080">Produtos<i class="fas fa-store-alt pl-2"></i></h4>
    </div>
    <div class="card-deck">
        @foreach (var item in Model)
        {
            <div class="col-md-3 col-sm-6 mt-3 mb-2">
                <div class="card">
                    <div class="container h-100 d-flex justify-content-center">
                        @{
                            //Formata imagem
                            var base64 = Convert.ToBase64String(item.Img);
                            var imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                            
                            //Formata nome do item
                            var nomeView = string.Empty;
                            if (item.Nome.Length > 20)
                                nomeView = $"{item.Nome.Substring(0, 16)}...";
                            else
                            {
                                nomeView = item.Nome;
                            }
                        }
                        <a style="cursor:pointer" onclick="@("window.location.href='" + @Url.Action("Index", "Produto",new { item.Id }) + "'");">
                            <img class="mt-3" src='@imgSrc' style="width:150px; height:150px;" />
                        </a>
                    </div>
                    <div class="content ml-3 mr-3 mb-3">
                        <label class="text-body mb-1" style="font-size:20px;">
                            <a class="text-secondary" style="cursor:pointer" title="@item.Nome" onclick="@("window.location.href='" + @Url.Action("Index", "Produto",new { item.Id }) + "'");">@nomeView</a>
                        </label>
                        <div class="text-capitalize" style="font-size:16px;"><strong>R$@item.Valor</strong></div>
                        @{
                            var valorParcelado = (item.Valor / 12).ToString("00.00");
                        }
                        <div class="text-capitalize text-secondary" style="font-size:14px;">Ou 12x de R$@valorParcelado</div>
                        <div class="text-center">
                            <a class="btn btn-outline-secondary btn-sm mt-2" style="cursor:pointer" title="Compra / Adicionar ao carrinho" onclick="@("window.location.href='" + @Url.Action("Index", "Produto",new { item.Id }) + "'");">
                                <i class="fas fa-shopping-cart mr-2"></i>Comprar
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        }

    </div>
</div>

<hr>
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34731274-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackEvent', 'sharing', 'viewed full-screen', 'snippet xrXp9', 0, true]);
    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
<script type="text/javascript">
    (function ($) {
        $('#theme_chooser').change(function () {
            whichCSS = $(this).val();
            document.getElementById('snippet-preview').contentWindow.changeCSS(whichCSS);
        });
    })(jQuery);
</script>
